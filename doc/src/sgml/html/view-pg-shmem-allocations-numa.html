<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>53.28. pg_shmem_allocations_numa</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="view-pg-shmem-allocations.html" title="53.27. pg_shmem_allocations" /><link rel="next" href="view-pg-stats.html" title="53.29. pg_stats" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">53.28. <code class="structname">pg_shmem_allocations_numa</code></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="view-pg-shmem-allocations.html" title="53.27. pg_shmem_allocations">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="views.html" title="Chapter 53. System Views">Up</a></td><th width="60%" align="center">Chapter 53. System Views</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 18.1 Documentation">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="view-pg-stats.html" title="53.29. pg_stats">Next</a></td></tr></table><hr /></div><div class="sect1" id="VIEW-PG-SHMEM-ALLOCATIONS-NUMA"><div class="titlepage"><div><div><h2 class="title" style="clear: both">53.28. <code class="structname">pg_shmem_allocations_numa</code> <a href="#VIEW-PG-SHMEM-ALLOCATIONS-NUMA" class="id_link">#</a></h2></div></div></div><a id="id-1.10.5.32.2" class="indexterm"></a><p>
   The <code class="structname">pg_shmem_allocations_numa</code> shows how shared
   memory allocations in the server's main shared memory segment are distributed
   across NUMA nodes. This includes both memory allocated by
   <span class="productname">PostgreSQL</span> itself and memory allocated
   by extensions using the mechanisms detailed in
   <a class="xref" href="xfunc-c.html#XFUNC-SHARED-ADDIN" title="36.10.11. Shared Memory">Section 36.10.11</a>. This view will output multiple rows
   for each of the shared memory segments provided that they are spread across
   multiple NUMA nodes. This view should not be queried by monitoring systems
   as it is very slow and may end up allocating shared memory in case it was not
   used earlier.
   Current limitation for this view is that won't show anonymous shared memory
   allocations.
  </p><p>
   Note that this view does not include memory allocated using the dynamic
   shared memory infrastructure.
  </p><div class="warning"><h3 class="title">Warning</h3><p>
      When determining the <acronym class="acronym">NUMA</acronym> node, the view touches
      all memory pages for the shared memory segment. This will force
      allocation of the shared memory, if it wasn't allocated already,
      and the memory may get allocated in a single <acronym class="acronym">NUMA</acronym>
      node (depending on system configuration).
    </p></div><div class="table" id="id-1.10.5.32.6"><p class="title"><strong>Table 53.28. <code class="structname">pg_shmem_allocations_numa</code> Columns</strong></p><div class="table-contents"><table class="table" summary="pg_shmem_allocations_numa Columns" border="1"><colgroup><col /></colgroup><thead><tr><th class="catalog_table_entry"><p class="column_definition">
       Column Type
      </p>
      <p>
       Description
      </p></th></tr></thead><tbody><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">name</code> <code class="type">text</code>
      </p>
      <p>
       The name of the shared memory allocation.
      </p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">numa_node</code> <code class="type">int4</code>
      </p>
      <p>
      ID of <acronym class="acronym">NUMA</acronym> node
      </p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">size</code> <code class="type">int8</code>
      </p>
      <p>
       Size of the allocation on this particular NUMA memory node in bytes
      </p></td></tr></tbody></table></div></div><br class="table-break" /><p>
   By default, the <code class="structname">pg_shmem_allocations_numa</code> view can be
   read only by superusers or roles with privileges of the
   <code class="literal">pg_read_all_stats</code> role.
  </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="view-pg-shmem-allocations.html" title="53.27. pg_shmem_allocations">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="views.html" title="Chapter 53. System Views">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="view-pg-stats.html" title="53.29. pg_stats">Next</a></td></tr><tr><td width="40%" align="left" valign="top">53.27. <code class="structname">pg_shmem_allocations</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 18.1 Documentation">Home</a></td><td width="40%" align="right" valign="top"> 53.29. <code class="structname">pg_stats</code></td></tr></table></div></body></html>